# dsv-syncer

![Version: v1.2.4](https://img.shields.io/badge/Version-v1.2.4-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: latest](https://img.shields.io/badge/AppVersion-latest-informational?style=flat-square)

A Helm chart for the Delinea DevOps Secrets Vault (DSV) Kubernetes Synchronizer Job.

```shell
NAMESPACE='dsv'
IMAGE_REPOSITORY='docker.io/delineaxpm/dsv-k8s'
IMAGE_TAG='v1.2.4' # use latest for test, but pin to a specific version for production

helm install \
    --namespace $NAMESPACE \
    --create-namespace \
    --set image.repository=${IMAGE_REPOSITORY} \
    --set image.tag=${IMAGE_TAG} \
    --atomic \
    --timeout "5m" \
    --debug \ # optional --values  --values .cache/charts/dsv-injector/values.yaml \
    dsv-syncer ./charts/dsv-syncer
```

## Maintainers

| Name             | Email | Url |
| ---------------- | ----- | --- |
| Sheldon Hull     |       |     |
| Delinea DSV Team |       |     |

## Values

| Key                                    | Type   | Default                                                                                    | Description                                                                                                                                                                                                                                                                                                                                               |
| -------------------------------------- | ------ | ------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| configmap                              | object | {} empty.                                                                                  | configmap are configuration values for the app to load. All of these are defaulted in the template itself and only need be set if adjusting. Since the user for the container is nonroot, only edit if you know what you are doing. Boolean values should be passed quoted to avoid issues.                                                               |
| cronJobSchedule                        | string | `"* * * * *"`                                                                              | cronJobSchedule controls when the syncer runs; five asterisks means "every minute". See [cronjob](https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax) @default - every minute, ie '\* \* \* \* \*'                                                                                                                 |
| dsvInjectorCredentialsSecretName       | string | `"dsv-injector-credentials"`                                                               | dsvInjectorCredentialsSecretName is the name of thecredentialsJson secret from the dsv-injector                                                                                                                                                                                                                                                           |
| fullnameOverride                       | string | `""`                                                                                       |                                                                                                                                                                                                                                                                                                                                                           |
| image.args[0]                          | string | `"-environment"`                                                                           |                                                                                                                                                                                                                                                                                                                                                           |
| image.args[1]                          | string | `"foo"`                                                                                    |                                                                                                                                                                                                                                                                                                                                                           |
| image.entrypoint                       | string | `"/app/dsv-syncer"`                                                                        | Entrypoint is the path to the binary. Since the container image could contain multiple binaries, this makes sure it's correctly mapped to the binary.                                                                                                                                                                                                     |
| image.pullPolicy                       | string | IfNotPresent                                                                               | pullPolicy is the image pull policy. If running locally built images, you'll want to set to Never to ensure local loaded images are used. Local testing use: `Never`.                                                                                                                                                                                     |
| image.repository                       | string | `"docker.io/delineaxpm/dsv-k8s"`                                                           |                                                                                                                                                                                                                                                                                                                                                           |
| image.tag                              | string | the current app version/chart version                                                      | Overrides the image tag whose default is the chart appVersion. Local Testing: Use `latest`.                                                                                                                                                                                                                                                               |
| imagePullSecrets                       | list   | `[]`                                                                                       |                                                                                                                                                                                                                                                                                                                                                           |
| nameOverride                           | string | `""`                                                                                       |                                                                                                                                                                                                                                                                                                                                                           |
| podAnnotations                         | object | `{}`                                                                                       | default annotations to add @default - Adds `dsv-filter-name` to simplify log selector streaming                                                                                                                                                                                                                                                           |
| podSecurityContext                     | object | `{}`                                                                                       |                                                                                                                                                                                                                                                                                                                                                           |
| replicaCount                           | int    | `1`                                                                                        | replicaCount @default - 1                                                                                                                                                                                                                                                                                                                                 |
| resources                              | object | No default values, user must specify to set resource limits.                               | We usually recommend not to specify default resources and to leave this as a conscious choice for the user. This also increases chances charts run on environments with little resources, such as Minikube. If you do want to specify resources, uncomment the following lines, adjust them as necessary, and remove the curly braces after 'resources:'. |
| securityContext                        | object | `{"readOnlyRootFilesystem":true,"runAsGroup":65532,"runAsNonRoot":true,"runAsUser":65532}` | securityContext is the security context for the controller. This uses chainguard static nonroot based image. Reference: https://edu.chainguard.dev/chainguard/chainguard-images/reference/static/overview/                                                                                                                                                |
| securityContext.readOnlyRootFilesystem | bool   | true                                                                                       | readOnlyRootFilesystem is the read only root file system flag.                                                                                                                                                                                                                                                                                            |
| securityContext.runAsGroup             | int    | 65532 (from chainguard static image)                                                       | runAsGroup is the run as group.                                                                                                                                                                                                                                                                                                                           |
| securityContext.runAsNonRoot           | bool   | true                                                                                       | runAsNonRoot is the run as non root flag.                                                                                                                                                                                                                                                                                                                 |
| securityContext.runAsUser              | int    | 65532 (from chainguard static image)                                                       | runAsUser is the run as user.                                                                                                                                                                                                                                                                                                                             |
| serviceAccount.annotations             | object | `{}`                                                                                       | Annotations to add to the service account @default - Adds `dsv-filter-name` to simplify log selector streaming                                                                                                                                                                                                                                            |
| serviceAccount.create                  | bool   | `true`                                                                                     | Specifies whether a service account should be created @default - true                                                                                                                                                                                                                                                                                     |
| serviceAccount.name                    | string | `""`                                                                                       | If not set and create is true, a name is generated using the fullname template                                                                                                                                                                                                                                                                            |

---

Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
