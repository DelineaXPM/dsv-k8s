{{- $name := (include "dsv.dnsname" .) -}}
{{- $port := int .Values.webhookPort -}}
{{- $uri := trimAll "/" .Values.webhookUri -}}
âœ¨ Deployed: {{ include "dsv.fullname" . }}

ğŸ“‚ Namepsace: {{ .Release.Namespace }}
{{ if eq .Values.service.type "ExternalName" }}
ğŸ”— The cluster will call the webhook at {{ printf "https://%s:%d/%s" .Values.externalName $port $uri }}

â— IMPORTANT: the endpoint certificate must have Subject Alternative Name '{{ $name }}'

ğŸ” The certificate chain that the cluster will use to verify the webhook is:
{{- $cert := .Values.caBundle | b64dec -}}
{{- $certs := split "\\n" $cert -}}
{{ range $cert := $certs }}
{{ $cert }}
{{ end }}
{{ else }}
ğŸ”— The cluster will call the webhook at {{ printf "https://%s:%d/%s" $name $port $uri }}
{{ end }}

{{- if .Values.configmap }}
âš™ï¸ ConfigMap created: {{ include "dsv.fullname" . }}-configmap
{{ else }}
â– no configmap detected, defaults used for logging level and any other configmap values
{{ end }}